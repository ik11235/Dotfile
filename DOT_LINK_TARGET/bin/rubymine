#!/bin/sh -eu
# JetBrains Toolboxが自動生成するシェルスクリプトをベースに自動的に最新バージョンで開くように改変

TARGET_DIR="$HOME/Library/Application Support/JetBrains/Toolbox/apps/RubyMine/ch-0"
if [ ! -d "$TARGET_DIR" ]; then
  echo "$TARGET_DIR not found.\nNot installed RubyMine?"
  exit 1
fi

LATEST_DIR="$(find "$TARGET_DIR" -type d -maxdepth 1 | tail -1)"

open -na "$LATEST_DIR/RubyMine.app/Contents/MacOS/rubymine" --args "$@"
