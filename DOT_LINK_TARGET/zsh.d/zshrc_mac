#brew 補完
##source /usr/local/Library/Contributions/brew_zsh_completion.zsh

#coreutils path
# export PATH="/usr/local/opt/coreutils/libexec/gnubin:$PATH"
# export MANPATH="/usr/local/opt/coreutils/libexec/gnuman:$MANPATH"

# To enable homebrew-command-not-found
HOMEBREW_COMMAND_NOT_FOUND_HANDLER="$(brew --repository)/Library/Homebrew/command-not-found/handler.sh"
if [ -f "$HOMEBREW_COMMAND_NOT_FOUND_HANDLER" ]; then
  source "$HOMEBREW_COMMAND_NOT_FOUND_HANDLER";
fi

## gcloud completion
if [ -d "/$(brew --prefix)/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/" ]; then
  source "$(brew --prefix)/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/path.zsh.inc"
  source "$(brew --prefix)/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/completion.zsh.inc"
fi

## gcloud sdk PATH
if command -v gcloud >/dev/null 2>&1; then
  export PATH="$(gcloud info --format='value(installation.sdk_root)')/bin:$PATH"
fi

if [ -f "${DOTHOME}/.zsh.d/zshrc_mac_private" ]; then
  # shellcheck source=./zshrc_mac_private
  source "${DOTHOME}/.zsh.d/zshrc_mac_private"
fi

## pinentry-macをターミナルで使用する
export GPG_TTY="$(tty)"

# mise
eval "$($(brew --prefix mise)/bin/mise activate zsh)"

# direnv
eval "$(direnv hook zsh)"

# Added by Windsurf
if [ -d "${HOME}/.codeium/windsurf/bin" ]; then
  export PATH="/${HOME}/.codeium/windsurf/bin:$PATH"
fi

if [[ -o interactive ]] && [ -z "$INTELLIJ_ENVIRONMENT_READER" ] && [ -z "$WARP_IS_LOCAL_SHELL_SESSION" ] && [ "$VSCODE_PID" = "" ] && [ "$TERM_PROGRAM" != "vscode" ]; then
  exec fish
fi
